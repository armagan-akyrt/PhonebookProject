<!DOCTYPE html>
<html>

    <body>
        <div id="dashboard"></div>

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />

        <script src="https://unpkg.com/react/umd/react.production.min.js"></script>
        <script src="https://unpkg.com/react-dom/umd/react-dom.production.min.js"></script>
        <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

        <script type="text/babel">
            function Room({ room, toggleRoomStatus }) {
                const { id, isEmpty, participants, startDate, endDate, capacity } = room;

                return (
                    <div
                        className={`card text-white ${isEmpty ? "bg-danger" : "bg-success"} mb-3`} // set color based on room status
                        style={{ maxWidth: "18rem", minHeight: "18rem" }}
                    >
                        <div className="card-header">Oda #{id}</div>
                        <div className="card-body">
                            {!isEmpty && (
                                <>
                                    <h5 className="card-title">Toplantı Bilgileri</h5>
                                    <p className="card-text">Katılımcılar: {participants.join(', ')}</p>
                                    <p className="card-text">Başlangıç tarihi: {formatDate(startDate)}</p>
                                    <p className="card-text">Bitiş tarihi: {formatDate(endDate)}</p>
                                </>
                            )}
                            <p className="card-text">Kapasite: {capacity}</p>
                        </div>
                    </div>
                );
            }

            function formatDate(date) {
                return new Date(date).toLocaleDateString() + ' ' + new Date(date).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });

            }

            function Dashboard() {
                const [rooms, setRooms] = React.useState([
                    {
                        id: 1,
                        isEmpty: false,
                        participants: ["test1", "test2", "test3"],
                        startDate: new Date("2023-09-04T10:00:00"),
                        endDate: new Date("2023-09-04T12:00:00"),
                        capacity: 10
                    },
                    {
                        id: 2,
                        isEmpty: true,
                        participants: [],
                        startDate: null,
                        endDate: null,
                        capacity: 10
                    }
                ]);

                const toggleRoomStatus = (roomId) => {
                    setRooms((prevRooms) =>
                        prevRooms.map((room) =>
                            room.id === roomId ? { ...room, isEmpty: !room.isEmpty } : room
                        )
                    );
                };

                const addRoom = () => {
                    setRooms((prevRooms) => [
                        ...prevRooms,
                        {
                            id: prevRooms.length + 1,
                            isEmpty: true,
                            participants: [],
                            startDate: null,
                            endDate: null,
                            capacity: 10
                        },
                    ]);
                };

                return (
                    <div className="container mt-3">
                        <button className="btn btn-primary mb-3" onClick={addRoom}>Oda Ekle</button>
                        <div className="row">
                            {rooms.map(room => (
                                <div className="col-md-4">
                                    <Room key={room.id} room={room} toggleRoomStatus={toggleRoomStatus} />
                                </div>
                            ))}
                        </div>
                    </div>
                );
            }

            ReactDOM.render(<Dashboard />, document.getElementById('dashboard'));
        </script>
    </body>

</html>
